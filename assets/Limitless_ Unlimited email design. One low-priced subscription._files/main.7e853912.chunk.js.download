(this["webpackJsonpexternal-embed"]=this["webpackJsonpexternal-embed"]||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var a,r,o,i,c,l,u,d=n(0),s=n.n(d),m=n(37),p=n.n(m),b=n(6),h=n(7),f=n(9),g=n(8),v=n(109),y=n(106),S=n(110),x=n(16),E=n(4),O=n(5),w=O.a.div(a||(a=Object(E.a)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100vh;\n  width: 100vw;\n  box-sizing: border-box;\n  text-align: center;\n  padding: 12px;\n  background-color: ",";\n"])),(function(e){return e.backgroundColor?e.backgroundColor:"#f3f4f6"})),_=O.a.div(r||(r=Object(E.a)(["\n  max-width: 28rem;\n  margin-left: auto;\n  margin-right: auto;\n"]))),j=O.a.div(o||(o=Object(E.a)(["\n  margin-bottom: 1.5rem;\n"]))),k=O.a.h2(i||(i=Object(E.a)(["\n  color: ",";\n  font-family: ",";\n  font-size: 28px;\n  line-height: 1;\n  margin-block: 0;\n  margin-bottom: 0.4;\n"])),(function(e){return e.textColor?e.textColor:"#000"}),(function(e){return e.fontFamily?e.fontFamily:"Open-Sans"})),C=O.a.p(c||(c=Object(E.a)(["\n  font-family: ",";\n  font-size: 14px;\n  font-weight: 400;\n  color: ",";\n"])),(function(e){return e.fontFamily?e.fontFamily:"Open-Sans"}),(function(e){return e.textColor?e.textColor:"#000"})),F=O.a.a(l||(l=Object(E.a)(["\n"]))),I=O.a.img(u||(u=Object(E.a)(["\n  position: absolute;\n  display: block;\n  right: 12px;\n  bottom: 12px;\n  max-height: 18px;\n  opacity: .3;\n  transition: all .25s ease-out;\n\n  :hover {\n    opacity: 1;\n  }\n"]))),T=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return s.a.createElement(F,{target:"_blank",href:this.props.targetUrl},s.a.createElement(I,{src:"/img/beehiiv-logo.png"}))}}]),n}(d.Component);T.defaultProps={targetUrl:"https://www.beehiiv.com"};var L,P=T,R=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return s.a.createElement(w,null,s.a.createElement(_,null,s.a.createElement(j,null,s.a.createElement(k,null,"Not found"),s.a.createElement(C,null,"Oops. We can't find what you're looking for."))),s.a.createElement(P,null))}}]),n}(d.Component),A=n(107),U=n(108),B=n(2),z=n.n(B),M=n(38),N=n.n(M),H=n(39),D=n.n(H),q=n(17),W=n(40),G=n.n(W),J=n(24),V=O.a.div(L||(L=Object(E.a)(["\n  font-size: 42px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 20px;\n  color: ",";\n"])),(function(e){return e.color?e.color:"#000"})),Q=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return s.a.createElement(V,{color:this.props.color},s.a.createElement(J.Dot,null,"."),s.a.createElement(J.Dot,null,"."),s.a.createElement(J.Dot,null,"."))}}]),n}(d.Component);Q.defaultProps={color:"#000"};var Y,K,X,Z,$,ee,te,ne,ae,re=Q,oe=s.a.createElement("svg",{viewBox:"0 0 24 24",stroke:"currentColor"},s.a.createElement("path",{d:"M9.5,18.2c-0.4,0.4-1,0.4-1.4,0l-3.8-3.8C4,14,4,13.4,4.3,13s1-0.4,1.4,0l3.1,3.1l8.6-8.6c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4 L9.5,18.2z"})),ie=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return s.a.createElement("div",{className:this.props.className},oe)}}]),n}(d.Component),ce={"Content-Type":"application/json",Accept:"application/json"},le=n(31),ue=n(42),de=function(e){var t=e.name,n=e.category,a=e.action,r=e.label,o=void 0===r?window.location.href:r,i=e.value,c=void 0===i?0:i,l=e.data,u=void 0===l?{}:l;if("undefined"!==typeof window.dataLayer){var d=new Date;window.dataLayer.push({event:t,eventProps:Object(ue.a)({category:n,action:a,label:o,value:c,timestamp:d.toISOString()},u)})}},se=O.a.form(Y||(Y=Object(E.a)(["\n  margin-left: auto;\n  margin-right: auto;\n  display: flex;\n"]))),me=O.a.div(K||(K=Object(E.a)(["\n  width: 100%;\n"]))),pe=O.a.label(X||(X=Object(E.a)(["\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n"]))),be=O.a.input(Z||(Z=Object(E.a)(["\n  -webkit-text-size-adjust: 100%;\n  tab-size: 4;\n  box-sizing: border-box;\n  border: 0 solid #e5e7eb;\n  font-family: ",";\n  margin: 0;\n  appearance: none;\n  background-color: rgba(255, 255, 255);\n  border-color: ",";\n  border-width: 2px;\n  display: block;\n  font-weight: 300;\n  font-size: 1rem;\n  line-height: 1.5rem;\n  padding-top: 0.75rem;\n  padding-bottom: 0.75rem;\n  padding-left: 1.25rem;\n  padding-right: 1.25rem;\n  color: #000;\n  width: 100%;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  border-top-left-radius: 6px;\n  border-bottom-left-radius: 6px;\n\n  :focus {\n    outline: none;\n    box-shadow: none;\n  }\n"])),(function(e){return e.fontFamily?e.fontFamily:"Open-Sans"}),(function(e){return e.borderColor?e.borderColor:"rgb(61, 0, 223)"})),he=O.a.div($||($=Object(E.a)(["\n  margin-top: 0;\n"]))),fe=O.a.div(ee||(ee=Object(E.a)(["\n  margin-top: 4px;\n"]))),ge=O.a.button(te||(te=Object(E.a)(["\n  white-space: pre;\n  appearance: button;\n  -webkit-text-size-adjust: 100%;\n  tab-size: 4;\n  box-sizing: border-box;\n  border: 0 solid #e5e7eb;\n  margin: 0;\n  font-family: ",";\n  background-color: ",";\n  color: ",";\n  border-color: transparent;\n  border-width: 1px;\n  cursor: pointer;\n  display: block;\n  font-weight: 500;\n  height: 100%;\n  font-size: 1rem;\n  line-height: 1.5rem;\n  min-width: 100px;\n  transition-property: background-color, border-color, color, fill, stroke,\n    opacity, box-shadow, transform, filter, backdrop-filter,\n    -webkit-backdrop-filter;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 0.2s;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  border-top-right-radius: 6px;\n  border-bottom-right-radius: 6px;\n  padding: 0 1rem;\n\n  :disabled {\n    opacity: 0.7;\n    cursor: default;\n  }\n"])),(function(e){return e.fontFamily?e.fontFamily:"Open-Sans"}),(function(e){return e.backgroundColor?e.backgroundColor:"rgb(61, 0, 223)"}),(function(e){return e.textColor?e.textColor:"#000"})),ve=O.a.p(ne||(ne=Object(E.a)(["\n  font-family: ",";\n  color: #ef4444;\n  font-size: 12px;\n"])),(function(e){return e.fontFamily?e.fontFamily:"Open-Sans"})),ye=Object(O.a)(ie)(ae||(ae=Object(E.a)(["\n  color: ",";\n  fill: ",";\n  width: 20px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-bottom: -5px;\n"])),(function(e){return e.color?e.color:"#FFF"}),(function(e){return e.color?e.color:"#FFF"})),Se=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t,n=e.target,r=n.value,o=n.name;a.updateState((t={},Object(q.a)(t,o,r),Object(q.a)(t,"error",null),t))},a.updateState=function(e){var t=Object.assign({},a.state,e);a.setState(t)},a.handleSubmit=function(e){e&&e.preventDefault();var t=a.state,n=t.captchaInteractionNeeded,r=t.captchaToken,o=t.captchaLoading,i=a.props.captchaEnabled;if(i&&n)a.updateState({captchaInteractionChallengeShowing:!0});else if(i&&!r&&o)a.updateState({isSubmitting:!0,captchaPrematurelySubmitted:!0});else{var c,l=a.props.successRedirectUrl,u=function(t){var n=a.props[t],r=function(t){if(null==t)return null;try{return decodeURIComponent(t)}catch(e){return t}};return Array.isArray(n)?r(n[0]):r(n)},d={external_embed_id:a.props.embedId,publication_id:a.props.publicationId,email:a.state.email,captcha_token:a.state.captchaToken,utm_source:u("utmSource"),utm_medium:u("utmMedium"),utm_campaign:u("utmCampaign"),referrer:u("referrer"),user_agent:a.props.userAgent};if(Object.keys(d).forEach((function(e){return null==d[e]&&delete d[e]})),d.email&&(!d.email||""!==d.email.trim()))a.updateState({isSubmitting:!0}),(c=d,le.post("/api/submit",c,{headers:ce})).then((function(e){var t,n;if(a.updateState({isSubmitted:!0}),de({name:"submittedEmail",category:"conversion",action:"submittedEmail",label:"embedded form",data:{email:a.state.email,utm_source:a.props.utmSource,utm_medium:a.props.utmMedium,utm_campaign:a.props.utmCampaign}}),l&&(null===(t=window)||void 0===t||null===(n=t.parent)||void 0===n?void 0:n.location)){var r=new URL(l),o=a.props.removeEmailFromRedirectUrl,i=e.data.subscription_id||null;o&&i?r.searchParams.set("sub_id",i):r.searchParams.set("email",a.state.email),window.parent.location.href=r.href}else{(window.top||window.parent||window).postMessage({type:"BEEHIIV_SUBSCRIBER_FORM_SUBMITTED",email:a.state.email,externalEmbedId:a.props.embedId},"*")}})).catch((function(e){var t=z()(e,"response","data","message")||"Something went wrong";a.updateState({error:t})})).finally((function(){a.updateState({isSubmitting:!1})}))}},a.handleSubmitOnSuccessfulCaptchaInteraction=function(e){a.updateState({captchaToken:e,captchaInteractionChallengeShowing:!1,captchaPrematurelySubmitted:!1,captchaLoading:!1,captchaInteractionNeeded:!1})},a.handleResubmitWhenTokenGenerated=function(e){a.updateState({captchaToken:e,captchaPrematurelySubmitted:!1,captchaInteractionChallengeShowing:!1,captchaLoading:!1,captchaInteractionNeeded:!1})},a.handleSetToken=function(e){a.updateState({captchaToken:e,captchaLoading:!1})},a.handleResetCaptcha=function(){a.updateState({captchaToken:""}),window.turnstile.reset(a.props.embedId)},a.beehiivLink=function(){var e=a.props,t=e.embedId,n=e.publicationId;return"https://beehiiv.com?utm_source=external_embed&utm_content=".concat(t,"&publication_id=").concat(n)},a.isLocked=function(){return!!a.state.isSubmitted},a.renderForm=function(){var e=a.props,t=e.inputPlaceholder,n=e.buttonText,r=e.successMessageText,o=e.config,i=e.captchaEnabled,c=e.embedId,l=e.isSlim,u=a.state,d=u.isSubmitting,m=u.isSubmitted,p=u.error,b=u.captchaInteractionChallengeShowing,h=u.captchaToken,f=z()(o,"button_color"),g=z()(o,"button_text_color"),v=z()(o,"body_font"),y=z()(o,"text_color"),S=z()(o,"button_font"),x=a.isLocked(),E=i&&!h,O=b&&l;return r&&m?s.a.createElement(C,{textColor:y,fontFamily:v},r):s.a.createElement(s.a.Fragment,null,!O&&s.a.createElement(se,{onSubmit:a.handleSubmit,captchaLoading:E},s.a.createElement(me,null,s.a.createElement(pe,{htmlFor:"email"},"Email"),s.a.createElement(be,{borderColor:f,fontFamily:S,autoComplete:"email",placeholder:t||"Enter your email",onChange:a.handleChange,value:a.state.email,disabled:x,type:"email",name:"email",required:!0})),s.a.createElement(he,null,s.a.createElement(ge,{backgroundColor:f,fontFamily:S,textColor:g,type:"submit",disabled:x},m?s.a.createElement(ye,{color:g}):d?s.a.createElement(re,{color:g}):n))),p&&s.a.createElement(ve,{fontFamily:v},p),i&&s.a.createElement(fe,null,s.a.createElement(G.a,{widgetId:c,sitekey:"0x4AAAAAAAEd9Y5m2ti6x_A8",appearance:"interaction-only",style:{margin:O?"-12px":""},onLoad:function(){a.updateState({captchaLoading:!0})},onTimeout:function(){return a.handleResetCaptcha()},onExpire:function(){return a.handleResetCaptcha()},theme:"auto",size:"normal",onVerify:function(e){var t=a.state,n=t.captchaPrematurelySubmitted;t.captchaInteractionNeeded&&e?a.handleSubmitOnSuccessfulCaptchaInteraction(e):n&&e?a.handleResubmitWhenTokenGenerated(e):a.handleSetToken(e)}})))},a.state={isSubmitting:!1,isSubmitted:!1,email:"",error:null,captchaToken:"",captchaInteractionNeeded:!1,captchaLoading:!1,captchaPrematurelySubmitted:!1,captchaInteractionChallengeShowing:!1},a}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.header,n=e.description,a=e.config,r=e.isSlim,o=e.isBeehiivBranded,i=z()(a,"background_color"),c=z()(a,"text_color"),l=z()(a,"header_font"),u=z()(a,"body_font");return r?this.renderForm():s.a.createElement(w,{backgroundColor:i},s.a.createElement(_,null,s.a.createElement(j,null,s.a.createElement(k,{textColor:c,fontFamily:l},t),s.a.createElement(C,{textColor:c,fontFamily:u},n)),this.renderForm()),o?s.a.createElement(P,{targetUrl:this.beehiivLink()}):null)}}]),n}(d.Component);Se.defaultProps={isSlim:!1};var xe=Se,Ee=n(31),Oe=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).addHumanScriptToHead=function(){"true"===window.env.REACT_APP_HUMAN_ENABLED&&(a.humanScript=document.createElement("script"),a.humanScript.src=window.env.REACT_APP_HUMAN_URL,a.humanScript.async=!0,document.head.appendChild(a.humanScript))},a.removeHumanScriptFromHead=function(){a.humanScript&&document.head.removeChild(a.humanScript)},a.fetchExternalEmbed=function(){var e,t=a.props.match.params.embedId;a.updateState({isLoading:!0}),(e=t,Ee.get("/api/embeds/".concat(e),{headers:ce})).then((function(e){var t=z()(e,"data"),n=z()(t,"publication_id"),r=z()(t,"header"),o=z()(t,"description"),i=z()(t,"input_placeholder"),c=z()(t,"button_text"),l=z()(t,"success_message_text"),u=z()(t,"success_redirect_url"),d=z()(t,"config"),s=z()(t,"captcha_enabled"),m=z()(t,"beehiiv_branded"),p=z()(t,"remove_email_from_redirect_url"),b=Object.assign({},a.state.config,d),h=a.fontsToLoad(b);a.updateState({publicationId:n,header:r,description:o,inputPlaceholder:i,buttonText:c,successMessageText:l,successRedirectUrl:u,config:b,requiredFonts:h,captchaEnabled:s,isBeehiivBranded:m,removeEmailFromRedirectUrl:p})})).catch((function(e){var t=z()(e,"response","status"),n=z()(e,"response","data","message")||"Something went wrong";a.updateState({isNotFound:404===t,error:n})})).finally((function(){a.updateState({isLoading:!1})}))},a.updateState=function(e){var t=Object.assign({},a.state,e);a.setState(t)},a.fontsToLoad=function(e){var t=z()(e,"header_font"),n=z()(e,"body_font"),a=z()(e,"button_font"),r=[];return t&&"Open Sans"!==t&&!r.includes(t)&&r.push(t),n&&"Open Sans"!==n&&!r.includes(n)&&r.push(n),a&&"Open Sans"!==a&&!r.includes(a)&&r.push(a),r},a.state={isLoading:!1,isNotFound:!1,error:null,publicationId:null,header:null,description:null,inputPlaceholder:null,buttonText:null,successMessageText:null,successRedirectUrl:null,captchaEnabled:!1,config:{body_font:"Poppins",button_font:"Open Sans",header_font:"Poppins",button_color:"#62FF2B",background_color:"#62ECFF",text_color:"#000",button_text_color:"#000"},requiredFonts:[],isBeehiivBranded:!1,removeEmailFromRedirectUrl:!1},a.humanScript=null,a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.fetchExternalEmbed(),this.addHumanScriptToHead()}},{key:"componentWillUnmount",value:function(){this.removeHumanScriptFromHead()}},{key:"render",value:function(){var e,t,n=this.props,a=n.location.search,r=n.match.params.embedId,o=D.a.parse(a,{ignoreQueryPrefix:!0}),i=!!o.slim,c=null===o||void 0===o?void 0:o.utm_source,l=null===o||void 0===o?void 0:o.utm_campaign,u=null===o||void 0===o?void 0:o.utm_medium,d=null===o||void 0===o?void 0:o.referrer,m=null===(e=window)||void 0===e||null===(t=e.navigator)||void 0===t?void 0:t.userAgent,p=this.state,b=p.isLoading,h=p.isNotFound,f=p.publicationId,g=p.header,v=p.description,y=p.inputPlaceholder,S=p.buttonText,x=p.successMessageText,E=p.successRedirectUrl,O=p.config,w=p.requiredFonts,_=p.captchaEnabled,j=p.isBeehiivBranded,k=p.removeEmailFromRedirectUrl;if(h)return s.a.createElement(A.a,{to:"/not-found"});if(b)return null;var C=w.map((function(e){return{font:e,weights:[400,700]}}));return s.a.createElement(s.a.Fragment,null,C.length>0&&s.a.createElement(N.a,{fonts:C}),s.a.createElement(xe,{embedId:r,publicationId:f,header:g,description:v,inputPlaceholder:y,buttonText:S,successMessageText:x,successRedirectUrl:E,config:O,isSlim:i,utmSource:c,utmMedium:u,utmCampaign:l,referrer:d,userAgent:m,captchaEnabled:_,isBeehiivBranded:j,removeEmailFromRedirectUrl:k}))}}]),n}(d.Component),we=Object(U.a)(Oe),_e=Object(x.a)(),je=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(S.a,{history:_e},s.a.createElement(v.a,null,s.a.createElement(y.a,{exact:!0,path:"/not-found",component:R}),s.a.createElement(y.a,{exact:!0,path:"/:embedId",component:we}),s.a.createElement(y.a,{component:R}))))}}]),n}(d.Component);p.a.render(s.a.createElement(je,null),document.getElementById("root"))},48:function(e,t,n){e.exports=n(104)},65:function(e,t){}},[[48,1,2]]]);